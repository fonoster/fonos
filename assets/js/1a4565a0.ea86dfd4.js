"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4410],{3905:(e,t,o)=>{o.d(t,{Zo:()=>u,kt:()=>m});var n=o(7294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var s=n.createContext({}),c=function(e){var t=n.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):l(l({},t),e)),o},u=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=c(o),h=r,m=p["".concat(s,".").concat(h)]||p[h]||d[h]||a;return o?n.createElement(m,l(l({ref:t},u),{},{components:o})):n.createElement(m,l({ref:t},u))}));function m(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,l=new Array(a);l[0]=h;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[p]="string"==typeof e?e:r,l[1]=i;for(var c=2;c<a;c++)l[c]=o[c];return n.createElement.apply(null,l)}return n.createElement.apply(null,o)}h.displayName="MDXCreateElement"},7853:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var n=o(7462),r=(o(7294),o(3905));const a={},l="Deploy with Docker",i={unversionedId:"operator/deploy-with-docker",id:"operator/deploy-with-docker",title:"Deploy with Docker",description:"Docker compose is the easiest way to deploy a self-hosted instance of Fonoster. This guide will walk you through deploying the Fonoster services using Docker and Docker Compose.",source:"@site/docs/operator/deploy-with-docker.md",sourceDirName:"operator",slug:"/operator/deploy-with-docker",permalink:"/docs/operator/deploy-with-docker",draft:!1,editUrl:"https://github.com/fonoster/website/edit/main/docs/docs/operator/deploy-with-docker.md",tags:[],version:"current",frontMatter:{}},s={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installation",id:"installation",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Known Issues",id:"known-issues",level:2}],u={toc:c},p="wrapper";function d(e){let{components:t,...o}=e;return(0,r.kt)(p,(0,n.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"deploy-with-docker"},"Deploy with Docker"),(0,r.kt)("p",null,"Docker compose is the easiest way to deploy a self-hosted instance of Fonoster. This guide will walk you through deploying the Fonoster services using Docker and Docker Compose."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"The only prerequisite for Fonoster is to have ",(0,r.kt)("a",{parentName:"p",href:"https://docs.docker.com/get-docker/"},"Docker")," installed on the host machine."),(0,r.kt)("h2",{id:"installation"},"Installation"),(0,r.kt)("p",null,"First, create a new directory in your preferred location and change to it. The root directory we will use in the guide is ",(0,r.kt)("inlineCode",{parentName:"p"},"fonoster.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir -p fonoster/etc\ncd fonoster\n")),(0,r.kt)("p",null,"Next, copy the .env.example from the repository to the current directory and rename it to .env. This file contains all the environment variables that the services need to run. You can use the following command to copy the file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"curl -o .env https://raw.githubusercontent.com/fonoster/fonoster/main/.env.example\ncurl -o ./etc/fluent.conf https://raw.githubusercontent.com/fonoster/fonoster/main/etc/fluent.conf\ncurl -o ./etc/vault.json https://raw.githubusercontent.com/fonoster/fonoster/main/etc/vault.json\ncurl -o ./etc/rbac.json https://raw.githubusercontent.com/fonoster/fonoster/main/mods/apiserver/etc/rbac.json\ncurl -o ./etc/log4j2.yml https://raw.githubusercontent.com/fonoster/fonoster/main/etc/log4j2.yml\n")),(0,r.kt)("p",null,"Then, open the .env file with your favorite editor and update the following variables:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"DOCKER_HOST_ADDRESS"),": The public IP address of your Docker host. If running locally, you can use your local IP address. If you are running the application on a server, you must use the public IP address of your server"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"NEXTAUTH_URL")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"WEBUI_APP_URL")," must be the URL where the application will be accessible. For example, if you run the application locally, you can use ",(0,r.kt)("inlineCode",{parentName:"li"},"http://localhost:8080"),". If you are running the application on a server in the cloud, you can use, for example, ",(0,r.kt)("inlineCode",{parentName:"li"},"https://fonoster.example.com")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"WEBUI_TEST_PHONE_SERVER")," - The public IP address of your Docker host. If running locally, you can use your local IP address. If you are running the application on a server, you must use the public IP address of your server.")),(0,r.kt)("p",null,"In addition to the previous variables, you should update all the secrets and ensure the .env file is safely stored."),(0,r.kt)("p",null,"Next, run the following command to start the application:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"curl -o ./compose.yaml https://raw.githubusercontent.com/fonoster/fonoster/main/compose.yaml\ndocker compose up -d\n")),(0,r.kt)("p",null,"Finally, you can access the application by visiting the URL you set in the ",(0,r.kt)("inlineCode",{parentName:"p"},"WEBUI_APP_URL")," variable. For example, if you put the variable to ",(0,r.kt)("inlineCode",{parentName:"p"},"http://localhost:8080"),", you can access the application by visiting ",(0,r.kt)("a",{parentName:"p",href:"http://localhost:8080"},"http://localhost:8080")," in your browser."),(0,r.kt)("h2",{id:"next-steps"},"Next Steps"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/operator/configuring-vault"},"Configuring Vault for secrets"))),(0,r.kt)("h2",{id:"known-issues"},"Known Issues"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Running Fonoster in development mode on macOS M2 chips causes several containers to crash and fail. No workaround is available at the moment.")))}d.isMDXComponent=!0}}]);